# 布林带均值回归选股策略使用说明

## 📊 策略概述

布林带均值回归策略是一个基于多重技术指标的综合选股策略，主要利用布林带、RSI、MACD、成交量等技术指标来识别超跌反弹和均值回归的投资机会。

### 🎯 策略核心思想

1. **均值回归原理**：股票价格在短期内可能会偏离其内在价值，但长期来看会回归到合理水平
2. **技术指标确认**：通过多个技术指标的共振来确认交易信号
3. **风险管理**：设置止损止盈，控制投资风险

## 🔧 技术指标说明

### 1. 布林带 (Bollinger Bands)
- **周期**: 20天移动平均线
- **标准差倍数**: 2.0
- **信号**: 
  - 价格触及下轨：超跌反弹机会
  - 价格触及上轨：超买回调风险

### 2. RSI (相对强弱指数)
- **周期**: 14天
- **超卖阈值**: 30
- **超买阈值**: 70
- **信号**: RSI < 30 表示超卖，> 70 表示超买

### 3. MACD (移动平均收敛发散)
- **快线**: 12天EMA
- **慢线**: 26天EMA
- **信号线**: 9天EMA
- **信号**: 金叉买入，死叉卖出

### 4. 成交量指标
- **周期**: 20天移动平均
- **放大倍数**: 1.5倍
- **信号**: 成交量放大确认价格走势

## 📈 策略参数配置

```yaml
# 策略核心参数
bb_period: 20                    # 布林带周期
bb_std_dev: 2.0                  # 标准差倍数
rsi_period: 14                   # RSI周期
rsi_oversold: 30                 # RSI超卖阈值
rsi_overbought: 70               # RSI超买阈值
macd_fast: 12                    # MACD快线
macd_slow: 26                    # MACD慢线
macd_signal: 9                   # MACD信号线
volume_ma_period: 20             # 成交量移动平均周期
min_volume_ratio: 1.5            # 最小成交量放大倍数

# 筛选条件
min_price: 5.0                   # 最低股价
max_price: 100.0                 # 最高股价
min_market_cap: 1000000000       # 最小市值（10亿）

# 风险管理
max_position_ratio: 0.1          # 单只股票最大仓位
stop_loss: 0.08                  # 止损比例
take_profit: 0.20                # 止盈比例
confidence_threshold: 0.7        # 置信度阈值
```

## 🚀 使用方法

### 1. 运行完整策略

```bash
# 运行布林带策略
python bollinger_strategy_runner.py
```

### 2. 测试策略功能

```bash
# 运行测试脚本
python test_bollinger_strategy.py
```

### 3. 分析单只股票

```python
from src.utils.config import Config
from src.strategy.bollinger_mean_reversion import BollingerMeanReversionStrategy
from src.data.stock_data import StockDataManager

# 创建配置和策略
config = Config("config.yaml")
strategy = BollingerMeanReversionStrategy(config)
data_manager = StockDataManager(config)

# 获取股票数据
stock_code = "000001"
data = data_manager.get_latest_data(stock_code, days=60)

# 分析股票
analysis = strategy.analyze_stock(stock_code, data)
print(f"综合评分: {analysis['composite_score']}")
print(f"交易建议: {analysis['trading_advice']['action']}")
```

## 📊 输出结果说明

### 1. 股票分析结果

```python
{
    'stock_code': '000001',
    'current_price': 15.20,
    'bb_position': 0.15,          # 布林带位置 (0-1)
    'rsi': 28.5,                  # RSI值
    'macd_signal': 0.02,          # MACD信号
    'volume_ratio': 1.8,          # 成交量比率
    'composite_score': 0.85,      # 综合评分 (0-1)
    'trading_advice': {
        'action': 'BUY',          # 交易动作
        'confidence': 0.85,       # 置信度
        'target_price': 18.50,    # 目标价格
        'stop_loss': 13.98,       # 止损价格
        'position_size': 0.085,   # 建议仓位
        'holding_period': 'medium', # 持有期
        'risk_level': 'medium'    # 风险等级
    },
    'signals': {
        'bb_signals': ['超跌反弹'],
        'rsi_signals': ['RSI超卖'],
        'macd_signals': ['MACD金叉'],
        'volume_signals': ['成交量放大']
    },
    'risk_metrics': {
        'volatility': 0.25,       # 年化波动率
        'max_drawdown': -0.12,    # 最大回撤
        'sharpe_ratio': 1.2       # 夏普比率
    }
}
```

### 2. 投资组合建议

```python
{
    'total_positions': 10,
    'total_score': 8.5,
    'positions': [
        {
            'stock_code': '000001',
            'current_price': 15.20,
            'weight': 0.12,        # 权重
            'position_size': 0.085, # 建议仓位
            'target_price': 18.50,
            'stop_loss': 13.98,
            'confidence': 0.85,
            'risk_level': 'medium',
            'holding_period': 'medium'
        }
    ],
    'risk_metrics': {
        'avg_volatility': 0.22,
        'avg_max_drawdown': -0.10,
        'portfolio_sharpe': 1.15
    }
}
```

## 📈 策略优势

### 1. 多重确认机制
- 布林带识别超跌超买
- RSI确认超卖超买
- MACD确认趋势转换
- 成交量确认价格走势

### 2. 风险控制
- 设置止损止盈
- 计算风险指标
- 评估风险等级
- 建议仓位管理

### 3. 综合评分系统
- 多指标权重分配
- 置信度评估
- 风险收益平衡

## ⚠️ 风险提示

1. **技术分析局限性**：技术分析不能预测所有市场变化
2. **市场风险**：股市存在系统性风险
3. **个股风险**：单只股票可能存在基本面风险
4. **时机风险**：买入时机不当可能影响收益

## 🔄 策略优化建议

### 1. 参数调优
- 根据市场环境调整布林带参数
- 优化RSI阈值设置
- 调整成交量放大倍数

### 2. 信号过滤
- 增加基本面筛选条件
- 添加行业轮动分析
- 考虑市场情绪指标

### 3. 风险管理
- 动态调整止损比例
- 设置最大回撤限制
- 增加对冲策略

## 📁 文件结构

```
stock_picker/
├── src/strategy/
│   └── bollinger_mean_reversion.py    # 策略核心代码
├── bollinger_strategy_runner.py       # 策略运行器
├── test_bollinger_strategy.py         # 测试脚本
├── config.yaml                        # 配置文件
└── 布林带策略使用说明.md              # 本说明文档
```

## 🎯 使用建议

1. **新手用户**：先运行测试脚本了解策略逻辑
2. **进阶用户**：根据市场情况调整参数配置
3. **专业用户**：可以扩展策略，添加更多技术指标
4. **实盘交易**：建议先进行回测验证，小资金试水

## 📞 技术支持

如有问题或建议，请查看项目文档或提交Issue。

---

**免责声明**：本策略仅用于技术分析研究，不构成投资建议。投资有风险，入市需谨慎。
